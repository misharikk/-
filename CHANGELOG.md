# Changelog

Все значимые изменения этого проекта будут описаны в этом файле.

Формат основан на [Keep a Changelog](https://keepachangelog.com/ru/1.0.0/),
и этот проект придерживается [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [0.2.0] - 2025-01-27

### Added
- Нумерация задач в чеклисте (1. ..., 2. ..., 3. ...)
- Фильтрация системных сообщений (нотификации чеклиста не становятся задачами)
- Глобальная защита от ошибок (бот не падает при ошибках обработки)
- Защита в критичных функциях (create/update checklist, safe_delete)
- Улучшенная обработка пересланных сообщений с детальным логированием

### Changed
- Первая задача изменена на "улыбнуться себе в зеркало"
- Обрезка текста задач: MAX_TASK_LENGTH уменьшен до 95 символов
- Добавлена обрезка после нумерации до 100 символов (лимит Telegram API)

### Fixed
- Исправлена ошибка "Checklist task text length must not exceed 100"
- Улучшена обработка пересланных сообщений с логированием origin_type
- Безопасное удаление сообщений с обработкой всех типов ошибок

## [0.1.0] - 2025-11-29

### Added
- Базовый каркас business-бота.
- Логирование `business_message` и `business_connection_id`.
- Онбординг: приветствие и запрос времени в формате `HH:MM`.
- Система версионирования с файлом `VERSION`.
- Вывод версии бота в логи и команду `/start`.
- Создание нативного Telegram чеклиста после установки времени.
- Добавление задач в чеклист из сообщений пользователя.
- Удаление служебных сообщений после установки времени.
- Безопасное удаление сообщений с обработкой ошибок.
- Детальное логирование всех операций.

### Fixed
- Исправлен метод удаления сообщений: убран неправильный параметр `chat_id` из `delete_business_messages`.
- Корректная обработка бизнес-сообщений без ошибок удаления.

