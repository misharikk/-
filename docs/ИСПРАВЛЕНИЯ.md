# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ—Ö–æ–¥ –¥–Ω—è

## –ü—Ä–æ–±–ª–µ–º–∞ 1: –û—Ç—á—ë—Ç –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è
**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

- –û—Ç—á—ë—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è, –Ω–æ –æ–Ω –ø—É—Å—Ç–æ–π: "–ó–∞ —Å–µ–≥–æ–¥–Ω—è –Ω–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á"
- –≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è —Å `user_state.tasks`
- **–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –∏–∑–º–µ–Ω–µ–Ω–∏–π —á–µ–∫–ª–∏—Å—Ç–∞ (`handle_checklist_state_update`)
- –í–æ–∑–º–æ–∂–Ω–æ, —Å–æ–±—ã—Ç–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —á–µ–∫–ª–∏—Å—Ç–∞ –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç –∏–ª–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ

## –ü—Ä–æ–±–ª–µ–º–∞ 2: –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –ø–æ–ø–∞–¥–∞—é—Ç –≤ –Ω–æ–≤—ã–π —á–µ–∫–ª–∏—Å—Ç
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- `create_checklist_for_user` —Ç–µ–ø–µ—Ä—å –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ (`if task_item.done: continue`)
- `rebuild_tag_checklist_for_user` —Ç–µ–ø–µ—Ä—å –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏
- –ü–æ—Å–ª–µ `close_day_for_user` –∑–∞–¥–∞—á–∏ —É–∂–µ —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è (—Ç–æ–ª—å–∫–æ –Ω–µ–≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ)

## –ü—Ä–æ–±–ª–µ–º–∞ 3: –î–∞—Ç–∞ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ —á–µ–∫–ª–∏—Å—Ç–∞ –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- `handle_force_newday` —Ç–µ–ø–µ—Ä—å –æ–±–Ω–æ–≤–ª—è–µ—Ç `user_state.date = current_date` –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –Ω–æ–≤–æ–≥–æ –¥–Ω—è
- –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –Ω–æ–≤—ã–π —á–µ–∫–ª–∏—Å—Ç –±—É–¥–µ—Ç —Å –∞–∫—Ç—É–∞–ª—å–Ω–æ–π –¥–∞—Ç–æ–π

## –ü—Ä–æ–±–ª–µ–º–∞ 4: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Ö–æ–¥ –¥–Ω—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- Job_queue —Ç–µ–ø–µ—Ä—å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –≤ `main()` –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è `app`
- –ù–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ø–µ—Ä–≤–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 60 —Å–µ–∫—É–Ω–¥ —Å –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ —á–µ—Ä–µ–∑ 10 —Å–µ–∫—É–Ω–¥

---

## üìã –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:

1. `bot/helpers_checklist.py`:
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á –≤ `create_checklist_for_user`
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á –≤ `rebuild_tag_checklist_for_user`

2. `bot/main.py`:
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ job_queue (–Ω–∞–ø—Ä—è–º—É—é –≤ `main()`)
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω `handle_force_newday` (–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ `user_state.date`)

3. `bot/helpers_daily.py`:
   - –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –æ—Ç—á—ë—Ç–∞

---

## üß™ –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:

1. **–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –Ω–µ –ø–æ–ø–∞–¥–∞—é—Ç –≤ –Ω–æ–≤—ã–π —á–µ–∫–ª–∏—Å—Ç:**
   ```
   /force_close
   /force_newday
   ```
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤ –Ω–æ–≤–æ–º —á–µ–∫–ª–∏—Å—Ç–µ —Ç–æ–ª—å–∫–æ –Ω–µ–≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

2. **–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è:**
   ```
   /force_newday
   ```
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –¥–∞—Ç–∞ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ —á–µ–∫–ª–∏—Å—Ç–∞ –∞–∫—Ç—É–∞–ª—å–Ω–∞—è

3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Ö–æ–¥ –¥–Ω—è:**
   - –ü–æ–¥–æ–∂–¥–∞—Ç—å —Å–º–µ–Ω—ã —Å–∏—Å—Ç–µ–º–Ω–æ–π –¥–∞—Ç—ã
   - –ë–æ—Ç –¥–æ–ª–∂–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–∫—Ä—ã—Ç—å —Å—Ç–∞—Ä—ã–π –¥–µ–Ω—å –∏ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π

4. **–û—Ç—á—ë—Ç —Å –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–º–∏ –∑–∞–¥–∞—á–∞–º–∏:**
   - –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∑–∞–¥–∞—á–∏ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ø–æ–º–µ—á–∞—é—Ç—Å—è –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏: `grep "–û–±–Ω–æ–≤–ª–µ–Ω.*—á–µ–∫–ª–∏—Å—Ç.*done" bot.log`

---

## ‚ö†Ô∏è –û—Å—Ç–∞–ª–æ—Å—å –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:

1. –ü–æ—á–µ–º—É –æ—Ç—á—ë—Ç –ø—É—Å—Ç–æ–π (–Ω–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á)?
   - –í–æ–∑–º–æ–∂–Ω–æ, —Å–æ–±—ã—Ç–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —á–µ–∫–ª–∏—Å—Ç–∞ –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è
   - –ò–ª–∏ –∑–∞–¥–∞—á–∏ –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è —Å `user_state.tasks`

2. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á:
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –ø—Ä–∏ –æ—Ç–º–µ—Ç–∫–µ –∑–∞–¥–∞—á–∏ –≤ —á–µ–∫–ª–∏—Å—Ç–µ
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ `handle_checklist_state_update` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è

