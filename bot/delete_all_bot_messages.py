"""
–°–∫—Ä–∏–ø—Ç –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –±–æ—Ç–∞ –∏–∑ —á–∞—Ç–æ–≤.
–ü—ã—Ç–∞–µ—Ç—Å—è —É–¥–∞–ª–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö chat_id, –¥–∞–∂–µ –µ—Å–ª–∏ –∏—Ö –Ω–µ—Ç –≤ –ë–î.
"""

import logging
import asyncio
import os
from pathlib import Path
from dotenv import load_dotenv
from telegram import Bot
from telegram.error import TelegramError

logging.basicConfig(level=logging.INFO)
logger = logging.getLogger(__name__)

# –ó–∞–≥—Ä—É–∂–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
PROJECT_ROOT = Path(__file__).parent.parent
load_dotenv(PROJECT_ROOT / ".env")
BOT_TOKEN = os.getenv("BOT_TOKEN")


async def delete_bot_messages_for_chat(bot: Bot, chat_id: int, business_connection_id: str = None) -> None:
    """
    –ü—ã—Ç–∞–µ—Ç—Å—è —É–¥–∞–ª–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –±–æ—Ç–∞ –∏–∑ —á–∞—Ç–∞.
    –ò—Å–ø–æ–ª—å–∑—É–µ—Ç delete_business_messages –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ business_connection_id.
    """
    try:
        logger.info(f"üßπ –ü–æ–ø—ã—Ç–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –±–æ—Ç–∞ –¥–ª—è chat_id={chat_id}")
        
        # –ï—Å–ª–∏ –µ—Å—Ç—å business_connection_id, –º–æ–∂–µ–º –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —É–¥–∞–ª–∏—Ç—å —á–µ—Ä–µ–∑ –Ω–µ–≥–æ
        # –ù–æ –ø—Ä–æ–±–ª–µ–º–∞: –Ω–∞–º –Ω—É–∂–Ω—ã message_id –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è
        
        # –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –ø–æ–¥—Ö–æ–¥: –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –ø–æ–ª—É—á–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ —É–¥–∞–ª–∏—Ç—å –∏—Ö
        # –ù–æ Telegram Bot API –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–µ—Ç–æ–¥ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
        
        logger.warning(f"‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å —É–¥–∞–ª–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è chat_id={chat_id}: –Ω—É–∂–Ω—ã message_id —Å–æ–æ–±—â–µ–Ω–∏–π")
        logger.warning(f"   –î–ª—è —É–¥–∞–ª–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –Ω—É–∂–Ω—ã –∏—Ö ID, –∫–æ—Ç–æ—Ä—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ë–î")
        logger.warning(f"   –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —É–¥–∞–ª–µ–Ω—ã –∏–∑ –ë–î, –º—ã –Ω–µ –º–æ–∂–µ–º —É–¥–∞–ª–∏—Ç—å –∏—Ö —Å–æ–æ–±—â–µ–Ω–∏—è")
        
    except Exception as e:
        logger.error(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è chat_id={chat_id}: {e}", exc_info=True)


async def delete_all_bot_messages() -> None:
    """
    –ü—ã—Ç–∞–µ—Ç—Å—è —É–¥–∞–ª–∏—Ç—å –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –±–æ—Ç–∞ –∏–∑ —á–∞—Ç–æ–≤.
    –í–ê–ñ–ù–û: –ë–µ–∑ –¥–∞–Ω–Ω—ã—Ö –≤ –ë–î (message_id) –º—ã –Ω–µ –º–æ–∂–µ–º —É–¥–∞–ª–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è.
    """
    if not BOT_TOKEN:
        logger.error("‚ùå BOT_TOKEN –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ .env")
        return
    
    bot = Bot(BOT_TOKEN)
    
    logger.warning("‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï: Telegram Bot API –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–µ—Ç–æ–¥ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π")
    logger.warning("‚ö†Ô∏è –î–ª—è —É–¥–∞–ª–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –Ω—É–∂–Ω—ã –∏—Ö message_id, –∫–æ—Ç–æ—Ä—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ë–î")
    logger.warning("‚ö†Ô∏è –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —É–¥–∞–ª–µ–Ω—ã –∏–∑ –ë–î, –º—ã –Ω–µ –º–æ–∂–µ–º —É–¥–∞–ª–∏—Ç—å –∏—Ö —Å–æ–æ–±—â–µ–Ω–∏—è")
    logger.warning("")
    logger.warning("üí° –†–µ—à–µ–Ω–∏–µ:")
    logger.warning("   1. –°–æ–æ–±—â–µ–Ω–∏—è –æ—Å—Ç–∞–Ω—É—Ç—Å—è –≤ —á–∞—Ç–∞—Ö, –Ω–æ –±–æ—Ç –∏—Ö –Ω–µ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å")
    logger.warning("   2. –ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –æ–±—Ä–∞—â–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–∞—á–Ω—É—Ç —Å —á–∏—Å—Ç–æ–≥–æ –ª–∏—Å—Ç–∞")
    logger.warning("   3. –ù–æ–≤—ã–µ —á–µ–∫–ª–∏—Å—Ç—ã –∏ —Å–æ–æ–±—â–µ–Ω–∏—è –±—É–¥—É—Ç —Å–æ–∑–¥–∞–Ω—ã –∑–∞–Ω–æ–≤–æ")
    logger.warning("")
    logger.info("‚úÖ –°—Ç–∞—Ä—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Å—Ç–∞–Ω—É—Ç—Å—è –≤ —á–∞—Ç–∞—Ö, –Ω–æ –Ω–µ –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –±–æ—Ç–æ–º")


if __name__ == "__main__":
    asyncio.run(delete_all_bot_messages())


