# Telegram Business Bot

Telegram business-–±–æ—Ç –Ω–∞ Python –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∏–∑–Ω–µ—Å-–∞–∫–∫–∞—É–Ω—Ç–∞–º–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–º–∏ —á–µ–∫–ª–∏—Å—Ç–∞–º–∏.

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.9+
- Telegram Bot Token
- Telegram Business Account (–¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –±–æ—Ç–∞ —á–µ—Ä–µ–∑ Connected Bots)

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:

```bash
git clone <repository_url>
cd horeca_fam
```

2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```bash
pip install -r requirements.txt
```

3. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ `.env.example`:

```bash
cp .env.example .env
```

4. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env` –∏ –¥–æ–±–∞–≤—å—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞:

```env
BOT_TOKEN=your_bot_token_here
ENV=prod
```

–ó–∞–º–µ–Ω–∏—Ç–µ `your_bot_token_here` –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω –≤–∞—à–µ–≥–æ –±–æ—Ç–∞, –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –æ—Ç @BotFather.

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** `TELEGRAM_BUSINESS_CONNECTION_ID` –ø–æ–ª—É—á–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑ —Å–æ–æ–±—â–µ–Ω–∏–π, –µ–≥–æ –Ω–µ –Ω—É–∂–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å –≤—Ä—É—á–Ω—É—é.

## –ó–∞–ø—É—Å–∫

### –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫

#### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ start.sh (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω–∞)

```bash
./start.sh
```

#### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
./scripts/start_bot.sh
```

–∏–ª–∏

```bash
./scripts/restart_bot.sh
```

#### –í–∞—Ä–∏–∞–Ω—Ç 3: –ù–∞–ø—Ä—è–º—É—é

```bash
python3 bot/main.py
```

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –≤—ã —É–≤–∏–¥–∏—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª–∏:
```
ü§ñ –ë–æ—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è...
–û–∂–∏–¥–∞—é business_message —Å –±–∏–∑–Ω–µ—Å-–∞–∫–∫–∞—É–Ω—Ç–∞...
```

### –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker

1. –°–æ–∑–¥–∞–π—Ç–µ `Dockerfile` (–µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç):

```dockerfile
FROM python:3.11-slim

WORKDIR /app

COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

COPY . .

CMD ["python3", "bot/main.py"]
```

2. –°–æ–∑–¥–∞–π—Ç–µ `.dockerignore`:

```
__pycache__/
*.pyc
*.pyo
*.pyd
.Python
env/
venv/
.env
*.log
*.db
*.pid
archive/
state_backup_*.db
```

3. –°–æ–±–µ—Ä–∏—Ç–µ –æ–±—Ä–∞–∑:

```bash
docker build -t telegram-bot .
```

4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:

```bash
docker run -d \
  --name telegram-bot \
  --env-file .env \
  -v $(pwd)/bot.db:/app/bot.db \
  -v $(pwd)/archive:/app/archive \
  telegram-bot
```

### –î–µ–ø–ª–æ–π –Ω–∞ DigitalOcean (Ubuntu + systemd)

–ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é –Ω–∞ —Å–µ—Ä–≤–µ—Ä DigitalOcean —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º systemd.

**–í–ê–ñ–ù–û:** –ü—É—Ç—å `/home/botuser/bot-project` –≤ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è—Ö –¥–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å —Ä–µ–∞–ª—å–Ω—ã–º –ø—É—Ç—ë–º –¥–æ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ. –ï—Å–ª–∏ –≤—ã –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–ª–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –≤ –¥—Ä—É–≥—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é, –∑–∞–º–µ–Ω–∏—Ç–µ –ø—É—Ç—å –≤ –∫–æ–º–∞–Ω–¥–∞—Ö –∏ –≤ —Ñ–∞–π–ª–µ `bot.service`.

#### –®–∞–≥ 1: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É

```bash
ssh root@YOUR_SERVER_IP
```

#### –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

–°–æ–∑–¥–∞–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `botuser` –∏ –≤—ã–¥–∞–π—Ç–µ –µ–º—É –ø—Ä–∞–≤–∞ sudo:

```bash
adduser botuser
usermod -aG sudo botuser
```

#### –®–∞–≥ 3: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Python, venv, pip –∏ git:

```bash
sudo apt update && sudo apt install -y python3 python3-venv python3-pip git
```

#### –®–∞–≥ 4: –ü–µ—Ä–µ—Ö–æ–¥ –ø–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è botuser

```bash
su - botuser
```

#### –®–∞–≥ 5: –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone <URL_–†–ï–ü–û–ó–ò–¢–û–†–ò–Ø> bot-project
cd bot-project
```

#### –®–∞–≥ 6: –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
python3 -m venv venv
source venv/bin/activate
pip install --upgrade pip
pip install -r requirements.txt
```

#### –®–∞–≥ 7: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ (—Ä—è–¥–æ–º —Å `bot/main.py`):

```bash
cp .env.example .env
nano .env  # –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–∞—à –ª—é–±–∏–º—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä
```

–ó–∞–ø–æ–ª–Ω–∏—Ç–µ `.env` —Ä–µ–∞–ª—å–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏:

```env
BOT_TOKEN=your_real_bot_token_here
ENV=prod
```

#### –®–∞–≥ 8: –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è –ª–æ–≥–æ–≤

–ü–µ—Ä–µ–¥ —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π systemd —Å–µ—Ä–≤–∏—Å–∞ —Å–æ–∑–¥–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –ª–æ–≥–æ–≤ –∏ –≤—ã–¥–∞–π—Ç–µ –ø—Ä–∞–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é `botuser`:

```bash
sudo mkdir -p /var/log/bot
sudo chown botuser:botuser /var/log/bot
```

#### –®–∞–≥ 9: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ systemd —Å–µ—Ä–≤–∏—Å–∞

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ `bot.service` –≤ —Å–∏—Å—Ç–µ–º–Ω—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é:

```bash
sudo cp bot.service /etc/systemd/system/bot.service
```

**–í–ê–ñ–ù–û:** –ü–µ—Ä–µ–¥ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ–º —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—É—Ç–∏ –≤ `bot.service` —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Ä–µ–∞–ª—å–Ω—ã–º –ø—É—Ç—è–º –Ω–∞ –≤–∞—à–µ–º —Å–µ—Ä–≤–µ—Ä–µ:
- `WorkingDirectory=/home/botuser/bot-project`
- `ExecStart=/home/botuser/bot-project/venv/bin/python3 /home/botuser/bot-project/bot/main.py`
- `EnvironmentFile=/home/botuser/bot-project/.env`
- `StandardOutput=append:/var/log/bot/bot.log`
- `StandardError=append:/var/log/bot/bot.err.log`

–ï—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –¥—Ä—É–≥–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏, –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `bot.service` –ø–µ—Ä–µ–¥ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ–º:

```bash
nano bot.service  # –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –ø—É—Ç–∏
sudo cp bot.service /etc/systemd/system/bot.service
```

#### –®–∞–≥ 10: –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞

–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é systemd –∏ –≤–∫–ª—é—á–∏—Ç–µ —Å–µ—Ä–≤–∏—Å:

```bash
sudo systemctl daemon-reload
sudo systemctl enable bot.service
sudo systemctl start bot.service
```

#### –®–∞–≥ 11: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–µ—Ä–≤–∏—Å –∑–∞–ø—É—â–µ–Ω:

```bash
sudo systemctl status bot.service
```

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞:

```bash
./check_status.sh
```

–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å —Å—Ç–∞—Ç—É—Å `active (running)`.

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ—Ç–ª–∞–¥–∫–∞

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –±–æ—Ç–∞

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –∑–∞–ø—É—â–µ–Ω –ª–∏ –±–æ—Ç, –º–æ–∂–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏:

**–ß–µ—Ä–µ–∑ systemctl:**

```bash
sudo systemctl status bot.service
```

**–ß–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç check_status.sh (–Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ):**

```bash
./check_status.sh
```

–°–∫—Ä–∏–ø—Ç –ø–æ–∫–∞–∂–µ—Ç:
- ‚úÖ –ó–µ–ª—ë–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, –µ—Å–ª–∏ –±–æ—Ç –∑–∞–ø—É—â–µ–Ω
- ‚ùå –ö—Ä–∞—Å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –ø–æ—Å–ª–µ–¥–Ω–∏–º–∏ –ª–æ–≥–∞–º–∏, –µ—Å–ª–∏ –±–æ—Ç –Ω–µ –∑–∞–ø—É—â–µ–Ω

#### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

–õ–æ–≥–∏ –±–æ—Ç–∞ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ –¥–≤—É—Ö –º–µ—Å—Ç–∞—Ö:

**1. –ß–µ—Ä–µ–∑ journald (—Å–∏—Å—Ç–µ–º–Ω—ã–µ –ª–æ–≥–∏):**

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
sudo journalctl -u bot.service -f

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 100 —Å—Ç—Ä–æ–∫
sudo journalctl -u bot.service -n 100

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –∑–∞ —Å–µ–≥–æ–¥–Ω—è
sudo journalctl -u bot.service --since today
```

**2. –ß–µ—Ä–µ–∑ –ª–æ–≥-—Ñ–∞–π–ª—ã (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –≤—ã–≤–æ–¥ –∏ –æ—à–∏–±–∫–∏):**

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞ (stdout)
sudo tail -n 50 /var/log/bot/bot.log

# –ü—Ä–æ—Å–º–æ—Ç—Ä –æ—à–∏–±–æ–∫ (stderr)
sudo tail -n 50 /var/log/bot/bot.err.log

# –ü—Ä–æ—Å–º–æ—Ç—Ä –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
sudo tail -f /var/log/bot/bot.log
sudo tail -f /var/log/bot/bot.err.log
```

#### –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞ –≤—Ä—É—á–Ω—É—é:

```bash
sudo systemctl restart bot.service
```

#### –ß—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ –±–æ—Ç –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

–ï—Å–ª–∏ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –±–æ—Ç –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞:**

```bash
sudo systemctl status bot.service
```

2. **–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –ª–æ–≥–∏:**

```bash
sudo journalctl -u bot.service -n 50
```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ —Ñ–∞–π–ª–∞ `.env`:**

```bash
ls -la /home/botuser/bot-project/.env
cat /home/botuser/bot-project/.env
```

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ:
- –§–∞–π–ª `.env` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- –í –Ω—ë–º —É–∫–∞–∑–∞–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π `BOT_TOKEN`
- –¢–æ–∫–µ–Ω –±–æ—Ç–∞ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ª–æ–≥–æ–≤:**

```bash
ls -la /var/log/bot
```

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é `botuser`:

```bash
sudo mkdir -p /var/log/bot
sudo chown botuser:botuser /var/log/bot
```

5. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –æ—à–∏–±–æ–∫:**

```bash
sudo tail -n 50 /var/log/bot/bot.err.log
```

6. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–æ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:**

```bash
cd /home/botuser/bot-project
source venv/bin/activate
python3 bot/main.py
```

–ï—Å–ª–∏ –±–æ—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é, –Ω–æ –Ω–µ —á–µ—Ä–µ–∑ systemd, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é `bot.service`.

#### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–º

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–æ—Ç–∞
sudo systemctl stop bot.service

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞
sudo systemctl start bot.service

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞
sudo systemctl restart bot.service

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
sudo systemctl status bot.service
```

#### –ê–≤—Ç–æ–¥–µ–ø–ª–æ–π —á–µ—Ä–µ–∑ deploy.sh

–î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–æ—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç `deploy.sh`. –û–Ω –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É –ø–æ SSH, –æ–±–Ω–æ–≤–ª—è–µ—Ç –∫–æ–¥ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–µ—Ä–≤–∏—Å.

**–ü–µ—Ä–µ–¥ –ø–µ—Ä–≤—ã–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º:**

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω SSH-–¥–æ—Å—Ç—É–ø –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `botuser`:

```bash
# –ù–∞ –≤–∞—à–µ–º –ª–æ–∫–∞–ª—å–Ω–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ
ssh-copy-id botuser@YOUR_SERVER_IP
```

2. –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª `.env` –Ω–∞ —Å–µ—Ä–≤–µ—Ä (—Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑):

```bash
scp .env botuser@YOUR_SERVER_IP:~/bot-project/.env
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç —Å IP –∞–¥—Ä–µ—Å–æ–º —Å–µ—Ä–≤–µ—Ä–∞:

```bash
./deploy.sh 167.172.xxx.xxx
```

–ò–ª–∏ –±–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ (—Å–∫—Ä–∏–ø—Ç —Å–ø—Ä–æ—Å–∏—Ç IP):

```bash
./deploy.sh
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ `.env` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- ‚úÖ –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É –ø–æ SSH
- ‚úÖ –û–±–Ω–æ–≤–ª—è–µ—Ç –∫–æ–¥ —á–µ—Ä–µ–∑ `git pull --rebase`
- ‚úÖ –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é systemd
- ‚úÖ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç —Å–µ—Ä–≤–∏—Å `bot.service`
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞

**–í–∞–∂–Ω–æ:**
- –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è **–ª–æ–∫–∞–ª—å–Ω–æ** –Ω–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ
- –¢—Ä–µ–±—É–µ—Ç—Å—è SSH-–¥–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–µ—Ä—É –±–µ–∑ –ø–∞—Ä–æ–ª—è (–Ω–∞—Å—Ç—Ä–æ–π—Ç–µ —á–µ—Ä–µ–∑ `ssh-copy-id`)
- –§–∞–π–ª `.env` –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑ –≤—Ä—É—á–Ω—É—é
- –ü—Ä–∏ –∫–∞–∂–¥–æ–º –¥–µ–ø–ª–æ–µ –∫–æ–¥ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è, –Ω–æ `.env` –Ω–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è

#### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞ (—Ä—É—á–Ω–æ–π —Å–ø–æ—Å–æ–±)

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –±–æ—Ç–∞ –≤—Ä—É—á–Ω—É—é:

1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–µ—Ä–≤–∏—Å:

```bash
sudo systemctl stop bot.service
```

2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞:

```bash
cd /home/botuser/bot-project
```

3. –û–±–Ω–æ–≤–∏—Ç–µ –∫–æ–¥:

```bash
git pull
```

4. –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∏ –æ–±–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ):

```bash
source venv/bin/activate
pip install -r requirements.txt
```

5. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å:

```bash
sudo systemctl start bot.service
```

### –î–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä (–æ–±—â–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏)

#### –í–∞—Ä–∏–∞–Ω—Ç 1: Systemd service

1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `/etc/systemd/system/telegram-bot.service`:

```ini
[Unit]
Description=Telegram Business Bot
After=network.target

[Service]
Type=simple
User=your_user
WorkingDirectory=/path/to/horeca_fam
EnvironmentFile=/path/to/horeca_fam/.env
ExecStart=/usr/bin/python3 /path/to/horeca_fam/bot/main.py
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
```

2. –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å:

```bash
sudo systemctl daemon-reload
sudo systemctl enable telegram-bot
sudo systemctl start telegram-bot
```

3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å:

```bash
sudo systemctl status telegram-bot
```

4. –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤:

```bash
sudo journalctl -u telegram-bot -f
```

#### –í–∞—Ä–∏–∞–Ω—Ç 2: PM2 (Node.js process manager)

```bash
npm install -g pm2
pm2 start start.sh --name telegram-bot
pm2 save
pm2 startup
```

#### –í–∞—Ä–∏–∞–Ω—Ç 3: Supervisor

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ supervisor:

```bash
sudo apt-get install supervisor
```

2. –°–æ–∑–¥–∞–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é `/etc/supervisor/conf.d/telegram-bot.conf`:

```ini
[program:telegram-bot]
command=/path/to/horeca_fam/start.sh
directory=/path/to/horeca_fam
user=your_user
autostart=true
autorestart=true
stderr_logfile=/var/log/telegram-bot.err.log
stdout_logfile=/var/log/telegram-bot.out.log
environment=BOT_TOKEN="your_token"
```

3. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ supervisor:

```bash
sudo supervisorctl reread
sudo supervisorctl update
sudo supervisorctl start telegram-bot
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ bot/                    # –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥ –±–æ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ main.py            # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª –±–æ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ state.py           # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ db.py              # –†–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö SQLite
‚îÇ   ‚îú‚îÄ‚îÄ helpers_*.py       # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ cleanup_all_users.py  # –°–∫—Ä–∏–ø—Ç –æ—á–∏—Å—Ç–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ docs/                   # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ BUSINESS_CONNECTION_SETUP.md
‚îÇ   ‚îú‚îÄ‚îÄ CHECK_BOT.md
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ scripts/                # –°–∫—Ä–∏–ø—Ç—ã –∑–∞–ø—É—Å–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ start_bot.sh
‚îÇ   ‚îî‚îÄ‚îÄ restart_bot.sh
‚îú‚îÄ‚îÄ archive/                # –ê—Ä—Ö–∏–≤ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö –æ—Ç—á—ë—Ç–æ–≤
‚îú‚îÄ‚îÄ .env                    # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (—Ç–æ–∫–µ–Ω) - —Å–æ–∑–¥–∞—Ç—å –≤—Ä—É—á–Ω—É—é
‚îú‚îÄ‚îÄ .env.example            # –®–∞–±–ª–æ–Ω –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ requirements.txt        # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îú‚îÄ‚îÄ start.sh                # –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω–∞
‚îú‚îÄ‚îÄ README.md               # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ VERSION                 # –¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è –±–æ—Ç–∞
‚îú‚îÄ‚îÄ CHANGELOG.md            # –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
‚îú‚îÄ‚îÄ bot.log                 # –õ–æ–≥–∏ (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
‚îî‚îÄ‚îÄ bot.db                  # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö SQLite (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ .env

–§–∞–π–ª `.env` —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ –Ω–µ –¥–æ–ª–∂–µ–Ω –ø–æ–ø–∞–¥–∞—Ç—å –≤ git. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `.env.example` –∫–∞–∫ —à–∞–±–ª–æ–Ω:

```env
# Telegram Bot Configuration
BOT_TOKEN=your_bot_token_here

# Telegram Business Connection (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –ø–æ–ª—É—á–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑ —Å–æ–æ–±—â–µ–Ω–∏–π)
# TELEGRAM_BUSINESS_CONNECTION_ID=

# Environment (dev/prod)
ENV=prod
```

**–í–∞–∂–Ω–æ:**
- –î–æ–±–∞–≤—å—Ç–µ `.env` –≤ `.gitignore`
- –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ —Å–æ–∑–¥–∞–π—Ç–µ `.env` –≤—Ä—É—á–Ω—É—é —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
- –ù–µ –∫–æ–º–º–∏—Ç—å—Ç–µ `.env` –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- –°–∫—Ä–∏–ø—Ç `start.sh` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ `.env`

## –ß—Ç–æ —É–º–µ–µ—Ç –±–æ—Ç –Ω–∞ –≠–¢–ê–ü–ï 1

1. **–û–±—Ä–∞–±–æ—Ç–∫–∞ business_message:**
   - –ü–æ–ª—É—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ Telegram Business-–∞–∫–∫–∞—É–Ω—Ç–∞
   - –õ–æ–≥–∏—Ä—É–µ—Ç –≤ –∫–æ–Ω—Å–æ–ª—å –∏ —Ñ–∞–π–ª `bot.log`:
     - `üì® business_message –ø–æ–ª—É—á–µ–Ω`
     - `business_connection_id`
     - `chat.id`
     - —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
   - –ü–æ–ª–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É update (–¥–ª—è –¥–µ–±–∞–≥–∞) –º–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å, —É—Å—Ç–∞–Ω–æ–≤–∏–≤ —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è DEBUG

2. **–ö–æ–º–∞–Ω–¥–∞ /start:**
   - –ï—Å–ª–∏ –∫—Ç–æ-—Ç–æ –Ω–∞–ø–∏—à–µ—Ç –±–æ—Ç—É –Ω–∞–ø—Ä—è–º—É—é (–æ–±—ã—á–Ω—ã–π message), –æ—Ç–≤–µ—Ç–∏—Ç "–±–æ—Ç –∑–∞–ø—É—â–µ–Ω"

3. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - –í—Å–µ –ª–æ–≥–∏ –ø–∏—à—É—Ç—Å—è –≤ —Ñ–∞–π–ª `bot.log` (UTF-8)
   - –í—Å–µ –ª–æ–≥–∏ –≤—ã–≤–æ–¥—è—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å
   - –£—Ä–æ–≤–µ–Ω—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: INFO

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **python-telegram-bot 22.4** - –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Telegram Bot API
- **python-dotenv** - –∑–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram Business

1. –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ @BotFather –∏ –ø–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω
2. –ü—Ä–µ–æ–±—Ä–∞–∑—É–π—Ç–µ –≤–∞—à Telegram –∞–∫–∫–∞—É–Ω—Ç –≤ Business –∞–∫–∫–∞—É–Ω—Ç
3. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –±–æ—Ç–∞ –∫ Business –∞–∫–∫–∞—É–Ω—Ç—É —á–µ—Ä–µ–∑ Settings ‚Üí Business ‚Üí Connected Bots
4. –ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ Business –∞–∫–∫–∞—É–Ω—Ç - –æ–Ω–æ –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è –≤ –ª–æ–≥–∞—Ö –±–æ—Ç–∞

## –õ–æ–≥–∏

–í—Å–µ –ª–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ñ–∞–π–ª `bot.log` –∏ –≤—ã–≤–æ–¥—è—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å. –ü—Ä–∏–º–µ—Ä –ª–æ–≥–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ business_message:

```
2025-11-29 12:00:00,000 - __main__ - INFO - üì® business_message –ø–æ–ª—É—á–µ–Ω
2025-11-29 12:00:00,001 - __main__ - INFO -    business_connection_id: abc123...
2025-11-29 12:00:00,002 - __main__ - INFO -    chat.id: 123456789
2025-11-29 12:00:00,003 - __main__ - INFO -    —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è: –ü—Ä–∏–≤–µ—Ç
```

## –°–ª–µ–¥—É—é—â–∏–µ —ç—Ç–∞–ø—ã

–ü–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –≤—ã —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–æ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ –ª–æ–≥–∏—Ä—É–µ—Ç business_message –∏ business_connection_id, –º–æ–∂–Ω–æ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –∫ **–≠–¢–ê–ü–£ 2** - —Å–æ–∑–¥–∞–Ω–∏–µ —á–µ–∫–ª–∏—Å—Ç–æ–≤ –∏ –∑–∞–¥–∞—á.

## –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–∫–∞—Ç—ã

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–æ—Å—Ç—É—é —Å—Ö–µ–º—É –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è:

- –¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —Ñ–∞–π–ª–µ `VERSION`.
- –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –±–æ—Ç –ø–∏—à–µ—Ç —Å–≤–æ—é –≤–µ—Ä—Å–∏—é –≤ –ª–æ–≥–∏ –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –µ—ë –≤ –æ—Ç–≤–µ—Ç –Ω–∞ `/start`.

### –ö–∞–∫ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –Ω—É–∂–Ω–æ.
2. –û–±–Ω–æ–≤–∏—Ç–µ —Ñ–∞–π–ª `VERSION` (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å `0.1.0` –Ω–∞ `0.2.0`).
3. –û–±–Ω–æ–≤–∏—Ç–µ `CHANGELOG.md`, –¥–æ–±–∞–≤–∏–≤ –Ω–æ–≤—ã–π –±–ª–æ–∫ —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏–π.
4. –°–¥–µ–ª–∞–π—Ç–µ –∫–æ–º–º–∏—Ç:

   ```bash
   git add main.py VERSION CHANGELOG.md README.md
   git commit -m "Bump version to 0.2.0"
   ```

5. –ü–æ—Å—Ç–∞–≤—å—Ç–µ —Ç–µ–≥:

   ```bash
   git tag v0.2.0
   ```

### –ö–∞–∫ –æ—Ç–∫–∞—Ç–∏—Ç—å—Å—è –∫ —Å—Ç–∞—Ä–æ–π –≤–µ—Ä—Å–∏–∏

–ï—Å–ª–∏ –≤ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏ —á—Ç–æ-—Ç–æ —Å–ª–æ–º–∞–ª–æ—Å—å, –º–æ–∂–Ω–æ –æ—Ç–∫–∞—Ç–∏—Ç—å—Å—è:

```bash
git checkout v0.2.0
```

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ –∫–æ–¥ —Ä–æ–≤–Ω–æ —Ç–æ–π –≤–µ—Ä—Å–∏–∏, –∫–æ—Ç–æ—Ä–∞—è –±—ã–ª–∞ –ø–æ–º–µ—á–µ–Ω–∞ —Ç–µ–≥–æ–º `v0.2.0`.
–ú–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞ –≤ —ç—Ç–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –∏ –¥–æ–∂–¥–∞—Ç—å—Å—è, –ø–æ–∫–∞ –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è –±—É–¥–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞.

## –î–µ–ø–ª–æ–π –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω-—Å–µ—Ä–≤–µ—Ä

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Python 3.9+:

```bash
sudo apt-get update
sudo apt-get install python3 python3-pip python3-venv
```

2. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:

```bash
git clone <repository_url>
cd horeca_fam
```

3. –°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):

```bash
python3 -m venv venv
source venv/bin/activate
```

4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```bash
pip install -r requirements.txt
```

5. –°–æ–∑–¥–∞–π—Ç–µ `.env` —Ñ–∞–π–ª:

```bash
cp .env.example .env
nano .env  # –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–∞—à –ª—é–±–∏–º—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä
```

6. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ `.env` —Ä–µ–∞–ª—å–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏:

```env
BOT_TOKEN=your_real_bot_token
ENV=prod
```

### –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ systemd (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–°–º. —Ä–∞–∑–¥–µ–ª "–î–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä" –≤—ã—à–µ –¥–ª—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ systemd service.

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏

- –õ–æ–≥–∏ –±–æ—Ç–∞: `tail -f bot.log`
- –õ–æ–≥–∏ systemd: `sudo journalctl -u telegram-bot -f`
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: `bot.db` (SQLite)
- –ê—Ä—Ö–∏–≤ –æ—Ç—á—ë—Ç–æ–≤: `archive/` (—Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã —Å –¥–∞—Ç–∞–º–∏)

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞

1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –±–æ—Ç–∞:

```bash
sudo systemctl stop telegram-bot
```

2. –û–±–Ω–æ–≤–∏—Ç–µ –∫–æ–¥:

```bash
git pull
```

3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å):

```bash
pip install -r requirements.txt
```

4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞:

```bash
sudo systemctl start telegram-bot
```

### –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ:

1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (`bot.db`) - —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
2. –ê—Ä—Ö–∏–≤ –æ—Ç—á—ë—Ç–æ–≤ (`archive/`) - —Å–æ–¥–µ—Ä–∂–∏—Ç –∏—Å—Ç–æ—Ä–∏—é –æ—Ç—á—ë—Ç–æ–≤
3. –õ–æ–≥–∏ (`bot.log`) - –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

–ü—Ä–∏–º–µ—Ä cron job –¥–ª—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–≥–æ –±—ç–∫–∞–ø–∞:

```bash
0 2 * * * tar -czf /backup/telegram-bot-$(date +\%Y\%m\%d).tar.gz /path/to/horeca_fam/bot.db /path/to/horeca_fam/archive/
```
